#gollum-editor{:class => "#{@new ? 'create' : 'edit'}", :'data-escaped-name' => escaped_name}
  = form_tag editor_path(@project, @name), :name => 'gollum-editor', :method => @new ? :post : :put do
    %fieldset#gollum-editor-fields
      - if @new
        #gollum-editor-title-field.singleline
          = label_tag :page, t("layout.wiki.page_title"), :class => 'jaws'
          = text_field_tag :page, @name,  :id => "gollum-editor-page-title"
      - else
        = hidden_field_tag :page, @name, :id => "gollum-editor-page-title"

      = render :partial => 'editor_toolbar'

      = text_area_tag :content, @content, :id => "gollum-editor-body", :'data-markup-lang' => format

      - if has_footer?
        #gollum-editor-edit-footer.collapsed
          = link_to "#", :class => "button" do
            %span= t("layout.wiki.expand_collapse")
          %h4
            Footer
          = text_area_tag :footer, footer.raw_data, :id => "gollum-editor-footer"

      - if has_sidebar?
        #gollum-editor-edit-sidebar.collapsed
          = link_to "#", :class => "button" do
            %span= t("layout.wiki.expand_collapse")
          %h4
            Sidebar
          = text_area_tag :sidebar, sidebar.raw_data, :id => "gollum-editor-sidebar"

      #gollum-editor-edit-summary.singleline
        = label_tag :message, t("layout.wiki.edit_commit_message"), :class => "jaws"
        = text_field_tag :message, t("layout.wiki.commit_message_placeholder"), :id => "gollum-editor-message-field"

      %span.jaws
        %br

      = submit_tag t("layout.wiki.save_button"), :id => "gollum-editor-submit", :title => t("layout.wiki.save_changes")
      = link_to t("layout.wiki.preview"), "javascript:void(0)", :id => "gollum-editor-preview",
                :class => "minibutton", :title => t("layout.wiki.preview_title"), :'data-url' => preview_project_wiki_index_path(@project)

- content_for :javascripts do
  = javascript_include_tag 'gollum/editor/gollum.editor.js'

- content_for :stylesheets do
  = stylesheet_link_tag 'gollum/editor.css'
