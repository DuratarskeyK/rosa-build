-set_meta_tags :title => t('.title')

%div{'ng-controller' => 'BuildListsController'}

  = render 'filter'

  %table.tablesorter{:cellpadding => "0", :cellspacing => "0"}
    %thead
      %tr
        %th.lpadding16= t("activerecord.attributes.build_list.id")
        %th.lpadding16= t("activerecord.attributes.build_list.status")
        %th.lpadding16= t("activerecord.attributes.build_list.project")
        %th.lpadding16= t("diff")
        %th.lpadding16= t("activerecord.attributes.build_list.project_version")
        %th.lpadding16= t("activerecord.attributes.build_list.save_to_repository")
        %th.lpadding6= t("activerecord.attributes.build_list.arch_short")
        %th.lpadding16= t("activerecord.attributes.build_list.user")
        %th.lpadding6= t("activerecord.attributes.build_list.updated_at")
    %tbody
      %tr{'ng-repeat' => 'bl in build_lists', :class => '{{bl.status_color}}', :id => 'build-list-{{bl.id}}', 'ng-class' => "{'group-start': !bl.relatedHidden, 'group-end': bl.lastRelated}"}

        / id
        %td.build-list-statuses{'ng-show' => 'bl.show'}
          %a.expand{'ng-show' => 'bl.hasRelated', 'ng-click' => 'showGroup(bl)'}
            %span.icon-chevron-down{'ng-show' => 'bl.relatedHidden'}
            %span.icon-chevron-up{'ng-hide' => 'bl.relatedHidden'}
          %a{'ng-href' => '{{bl.url}}' } {{bl.id}}
          %div{'ng-show' => 'bl.hasRelated'}
            %div.status{'ng-repeat' => 'related in bl.related', :class => '{{related.status_color}}'} &nbsp; 

        / status
        %td{'ng-show' => 'bl.show'}
          {{bl.human_status}}
          %br
          %time{'ng-show' => 'bl.duration'}
            {{bl.duration}}
            %time{'ng-show' => 'bl.average_build_time'}
              \/{{bl.average_build_time}}

        / project
        %td.centered{'ng-show' => '!bl.project && bl.show', :colspan => 2}
          = t('layout.projects.unexisted_project')
        %td{'ng-show' => 'bl.project && bl.show'}
          %a{'ng-href' => '{{bl.project.url}}' } {{bl.project.name_with_owner}}

        / diff
        %td{'ng-show' => 'bl.project && bl.show', 'ng-bind-html-unsafe' => 'bl.project.version_link'}

        / project_version
        %td{'ng-show' => 'bl.show'} {{bl.version_release}}

        / save_to_repository
        %td{'ng-show' => 'bl.show'}
          %a{'ng-href' => '{{bl.save_to_repository.url}}' } {{bl.save_to_repository.name}}

        / arch_short
        %td{'ng-show' => 'bl.arch && bl.show'} {{bl.arch}}
        %td{'ng-show' => '!bl.arch && bl.show'}
          = t("layout.arches.unexisted_arch")

        / user
        %td{'ng-show' => 'bl.show'}
          %a{'ng-href' => '{{bl.user.url}}' } {{bl.user.fullname}}

        / updated_at
        %td{'ng-show' => 'bl.show'} {{bl.updated_at}}



  .both


  =# will_paginate @bls # TODO

= render @project ? 'projects/base/submenu' : 'projects/build_lists/submenu'
