.block
  .secondary-navigation
    %ul.wat-cf
      %li.first= link_to t("layout.build_lists.current"), project_path(@build_list.project) + "#build_lists"
      %li= link_to t("layout.build_lists.all"), project_build_lists_path(@build_list.project)
      %li.active= link_to t("layout.build_lists.show"), @build_list

  .content
    .inner
      %p
        %b
          = t("activerecord.attributes.build_list.name")
          \:
        = @build_list.present? ? @build_list.name : t("layout.build_lists.name_not_yet_defined")
      %p
        %b
          = t("activerecord.attributes.build_list.bs_id")
          \:
        = @build_list.bs_id
      %p
        %b
          = t("activerecord.attributes.build_list.container_path")
          \:
        - if @build_list.container_path.present?
          - container_url = "http://#{request.host_with_port}/downloads#{@build_list.container_path}"
          = link_to container_url, container_url
      %p
        %b
          = t("activerecord.attributes.build_list.bpl")
          \:
        = @build_list.bpl.name
      %p
        %b
          = t("activerecord.attributes.build_list.pl")
          \:
        = @build_list.pl.name
      %p
        %b
          = t("activerecord.attributes.build_list.include_repos")
          \:
        = (@build_list.include_repos||[]).map{|r| Repository.find(r).name}.join(', ')
      %p
        %b
          = t("activerecord.attributes.build_list.update_type")
          \:
        = @build_list.update_type
      %p
        %b
          = t("activerecord.attributes.build_list.build_requires")
          \:
        = @build_list.build_requires
      %p
        %b
          = t("activerecord.attributes.build_list.auto_publish")
          \:
        = @build_list.auto_publish
      %p
        %b
          = t("activerecord.attributes.build_list.status")
          \:
        = @build_list.human_status
      %p
        %b
          = t("activerecord.attributes.build_list.project_version")
          \:
        = @build_list.project_version
      %p
        %b
          = t("activerecord.attributes.build_list.project")
          \:
        = link_to @build_list.project.name, project_path(@build_list.project)
      %p
        %b
          = t("activerecord.attributes.build_list.arch")
          \:
        = @build_list.arch.name
      %p
        %b
          = t("activerecord.attributes.build_list.user")
          \:
        = @build_list.user.try(:fullname)
      %p
        %b
          = t("activerecord.attributes.build_list.notified_at")
          \:
        = @build_list.notified_at
      %p
        %b
          = t("activerecord.attributes.build_list.is_circle")
          \:
        = t("layout.#{@build_list.is_circle?}_")

      - if @build_list.can_publish?  
        .wat-cf
          = link_to image_tag("web-app-theme/icons/tick.png", :alt => t("layout.publish")) + " " + t("layout.publish"), publish_build_list_path(@build_list), :method => "put", :class => "button", :confirm => t("layout.confirm")

.block
  .content
    %h2= t("layout.build_lists.items_header")
    
    .inner
      - if @item_groups.blank?
        = t("layout.build_lists.no_items_data")
        
      - @item_groups.each_with_index do |group, level|
        %h3.title Level ##{level}
        %table.table
          %tr
            %th.first= t("activerecord.attributes.build_list/item.name")
            %th= t("activerecord.attributes.build_list/item.version")
            %th.last= t("activerecord.attributes.build_list/item.status")

          - group.each do |item|
            %tr{:class => cycle("odd", "even")}
              %td= item.name
              %td= item.version
              %td.last= item.human_status

- content_for :sidebar, render('sidebar', :project => @build_list.project)
