.block
  .secondary-navigation
    %ul.wat-cf
      %li.first.active= link_to t("layout.git.repositories.source"), platform_repository_project_repo_path(@platform, @repository, @project)
      %li= link_to t("layout.git.repositories.commits"), commits_path(@platform, @repository, @project, :treeish => @treeish)

  .content
    .inner
      %p
        %b
          = t("activerecord.models.project")
          \:
        = @project.name

- if @commit
  .block
    .content
      .inner
        = render :partial => "git/commits/commits", :object => [@commit]

.block
  .content
    .inner
      %h3= render_path

      .blob_header
        .size #{(@blob.size / 1024.0).round(3)} Kb
        .buttons
          #{link_to "Raw", raw_commit_path(@platform, @repository, @project, @commit_hash, @path)} #{link_to "Blame", blame_commit_path(@platform, @repository, @project, @commit_hash, @path)} #{link_to "History", commits_path(@platform, @repository, @project, @treeish, @path)}
        .clear
      %table.table.blob
        %tr
          %td.lines
            :plain
              <pre>#{render_line_numbers(@blob.data.split("\n").length)}</pre>
          %td.blob
            :plain
              <pre>#{render_blob(@blob)}</pre>

- content_for :sidebar, render(:partial => 'git/shared/sidebar')