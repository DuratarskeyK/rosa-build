= form_tag blob_file_path, :name => 'blob-editor', :method => :put do
  .file
    = text_area_tag :content, @blob.data.encode_to_default, :id => 'code'

  .both
  = t("enter_commit_message")
  = text_area_tag :message, '', :class => 'commit-message'

  %br
  %br
  = submit_tag t("layout.save"), :title => t("layout.save")
  = t("layout.or")
  = link_to t("layout.cancel"), blob_file_path, :class => 'button'

-##gollum-editor.edit{:'data-escaped-name' => @path.encode_to_default}
  = form_tag blob_file_path, :name => 'blob-editor', :method => :put do
    %fieldset#gollum-editor-fields

      = text_area_tag :content, @blob.data.encode_to_default, :id => "gollum-editor-body"

      #gollum-editor-edit-summary.singleline
        = label_tag :message, t("layout.wiki.edit_commit_message"), :class => "jaws"
        = text_field_tag :message, t("layout.wiki.commit_message_placeholder"), :id => "editor-commit-message-field"

      %span.jaws
        %br

      = submit_tag t("layout.wiki.save_button"), :id => "gollum-editor-submit", :title => t("layout.wiki.save_changes")
      = link_to t("layout.cancel"), blob_file_path, :class => 'minibutton', :id => 'gollum-editor-preview'

:javascript
  $(function() {
    var editor = CodeMirror.fromTextArea(document.getElementById('code'), {lineNumbers: true, mode: '#{@blob.mime_type}', theme: 'eclipse'});
  });
