-set_meta_tags :title => [title_object(@repository), t('layout.repositories.edit')]
= render 'submenu'
= render 'sidebar'

%h3.fix= "#{t("layout.repositories.about")}: #{@repository.name}"

= form_for @repository, :url => platform_repository_path(@platform, @repository), :html => { :class => :form } do |f|
  = render "form", :f => f
%br

- if can?(:update, @repository)
  .hr
  %h3= t('layout.repositories.extra_actions')

  = link_to t('layout.repositories.regenerate_metadata'),
            regenerate_metadata_platform_repository_path(@platform, @repository),
            :method => :put, :confirm => t('layout.confirm'), :class => 'button'

  - if @platform.main?
    - if @repository.sync_locked?
      - label = t('layout.repositories.unlock_sync')
      - path  = unlock_sync_platform_repository_path(@platform, @repository)
    - else
      - label = t('layout.repositories.lock_sync')
      - path  = lock_sync_platform_repository_path(@platform, @repository)

    = link_to label, path, :method => :put, :confirm => t('layout.confirm'), :class => 'button'
    .both
  .hr



- if @platform.main?
  = render "shared/members_table",
    :remove_members_path => remove_members_platform_repository_path(@platform, @repository),
    :remove_member_path => remove_member_platform_repository_path(@platform, @repository),
    :add_member_path => add_member_platform_repository_path(@platform, @repository),
    :members => @members,
    :editable_object => @repository
